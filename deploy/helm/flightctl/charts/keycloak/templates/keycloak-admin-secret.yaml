{{- if include "keycloak.shouldGenerateSecrets" . -}}
apiVersion: v1
kind: Secret
metadata:
  name: keycloak-admin-secret
  namespace: {{ .Release.Namespace }}
  annotations:
    helm.sh/resource-policy: keep
type: Opaque
data:
  username: {{ printf "admin" | b64enc | quote }}
  password: {{ include "keycloak.lookupOrGeneratePassword" (dict "secret" "keycloak-admin-secret" "namespace" .Release.Namespace "key" "password" "context" $) }}
{{ end }}