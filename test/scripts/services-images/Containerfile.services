FROM quay.io/centos-bootc/centos-bootc:stream9

# Copy  and install the locally built services rpm
COPY /bin/rpm/flightctl-services-*.rpm /tmp/flightctl-services.rpm
# Use BuildKit cache mounts for dnf package caching
RUN --mount=type=cache,target=/var/cache/dnf \
    --mount=type=cache,target=/var/lib/dnf \
    dnf -y install /tmp/flightctl-services.rpm

RUN systemctl enable flightctl.target

RUN bootc container lint
