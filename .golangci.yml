# This file contains all available configuration options
# with their default values.
version: "2"
# options for analysis running
run:
  # default concurrency is a available CPU number
  concurrency: 4
  # timeout for analysis, e.g. 30s, 5m, default is 1m
  timeout: 10m
  # exit code when at least one issue was found, default is 1
  issues-exit-code: 1
  # include test files or not, default is true
  tests: true

issues:
  # make issues output unique by line, default is true
  uniq-by-line: true

# output configuration options
output:
  formats:
    text:
      path: stdout
      print-linter-name: true
      print-issued-lines: true
      colors: true

linters:
  enable:
    - copyloopvar
    - depguard
    - errcheck
    - gocyclo
    - gosec
    - misspell
    - nolintlint
    - unconvert
  settings:
    depguard:
      rules:
        main:
          deny:
            - pkg: ^math/rand$
              desc: Use math/rand/v2 instead
    govet:
      enable:
        - shadow
      settings:
        shadow:
          strict: false
        printf:
          funcs:
            - github.com/sirupsen/logrus.Infof
            - github.com/sirupsen/logrus.Warnf
            - github.com/sirupsen/logrus.Errorf
            - github.com/sirupsen/logrus.Fatalf
            - (github.com/sirupsen/logrus.Entry).Infof
            - (github.com/sirupsen/logrus.Entry).Warnf
            - (github.com/sirupsen/logrus.Entry).Errorf
            - (github.com/sirupsen/logrus.Entry).Fatalf
    staticcheck:
      dot-import-whitelist:
        - "github.com/onsi/ginkgo/v2"
        - "github.com/onsi/gomega"
        - "github.com/onsi/gomega/gbytes"
  exclusions:
    generated: lax
    presets:
      - comments
      - common-false-positives
      - legacy
      - std-error-handling
    rules:
      - path: (.+)\.go$
        text: declaration of "(err|ctx)" shadows declaration at
      - linters:
          - staticcheck
        text: '^QF1008:' # ignore "Omit embedded fields from selector expression"
      - linters:
          - staticcheck
        text: '^QF1001:' # ignore "Apply De Morganâ€™s law"
    paths:
      - bin
      - deploy
      - docs
      - examples
      - hack
      - packaging
      - reports
      - internal/auth/issuer/pam
      - third_party$
      - builtin$
      - examples$

formatters:
  enable:
    - gci
    - gofmt
    - goimports
  exclusions:
    generated: lax
    paths:
      - bin
      - deploy
      - docs
      - examples
      - hack
      - packaging
      - reports
      - internal/auth/issuer/pam
      - third_party$
      - builtin$
      - examples$