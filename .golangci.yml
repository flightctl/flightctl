version: 2

# This file contains all available configuration options
# with their default values.

# options for analysis running
run:
  # default concurrency is a available CPU number
  concurrency: 4

  # timeout for analysis, e.g. 30s, 5m, default is 1m
  timeout: 10m

  # exit code when at least one issue was found, default is 1
  issues-exit-code: 1

  # include test files or not, default is true
  tests: true

# output configuration options
output:
  # colored-line-number|line-number|json|tab|checkstyle|code-climate, default is "colored-line-number"
  formats:
    colored-line-number:
      path: stdout

  # print lines of code with issue, default is true
  print-issued-lines: true

  # print linter name in the end of issue text, default is true
  print-linter-name: true

  # make issues output unique by line, default is true
  uniq-by-line: true

issues:
  # List of regexps of issue texts to exclude.
  #
  # But independently of this option we use default exclude patterns,
  # it can be disabled by `exclude-use-default: false`.
  # To list all excluded by default patterns execute `golangci-lint run --help`
  #
  # Default: https://golangci-lint.run/usage/false-positives/#default-exclusions
  exclude:
    - 'declaration of "err" shadows declaration at'
    - 'Error return value of .*\.Close\(\) is not checked'
    - 'Error return value of `fmt\.Fprint.*` is not checked'
    - 'param .* has same name as predeclared identifier'
    - 'function .* has same name as predeclared identifier'
    - 'variable .* has same name as predeclared identifier'
    - 'QF1008: could remove embedded field'
    - 'QF1002: could use tagged switch'
    - 'QF1003: could use tagged switch'
    - 'QF1004: could use strings\.ReplaceAll'
    - 'ST1005: error strings should not'
    - 'ST1023: should omit type .* from declaration'
    - 'SA4011: ineffective break statement'
    - 'G30[124]: Expect .* permissions'
    - 'G103: Use of unsafe calls'
    - 'G204: Subprocess launched with variable'

  # Which dirs to exclude: issues from them won't be reported.
  # Can use regexp here: `generated.*`, regexp is applied on full path,
  # including the path prefix if one is set.
  # Default dirs are skipped independently of this option's value (see exclude-dirs-use-default).
  # "/" will be replaced by current OS file path separator to properly work on Windows.
  # Default: []
  exclude-dirs:
    - bin
    - deploy
    - docs
    - examples
    - hack
    - packaging
    - reports
    - internal/auth/issuer/pam
    - test/integration/tasks

linters:
  disable-all: true
  enable:
    - copyloopvar
    - gocyclo
    - ineffassign
    - misspell
    - nolintlint
    - unconvert
  disable:
    - errcheck
    - govet
    - unused
    - gosec
    - predeclared
    - staticcheck

formatters:
  enable:
    - gci
    - gofmt
    - goimports

linters-settings:

  govet:
