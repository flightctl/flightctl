// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"encoding/json"
	"errors"
	"time"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/oapi-codegen/runtime"
)

// Defines values for BindingType.
const (
	BindingTypeEarly BindingType = "early"
	BindingTypeLate  BindingType = "late"
)

// Defines values for EarlyBindingType.
const (
	Early EarlyBindingType = "early"
)

// Defines values for ExportFormatType.
const (
	ExportFormatTypeISO                ExportFormatType = "iso"
	ExportFormatTypeQCOW2              ExportFormatType = "qcow2"
	ExportFormatTypeQCOW2DiskContainer ExportFormatType = "qcow2-disk-container"
	ExportFormatTypeVMDK               ExportFormatType = "vmdk"
)

// Defines values for ImageBuildConditionReason.
const (
	ImageBuildConditionReasonBuilding  ImageBuildConditionReason = "Building"
	ImageBuildConditionReasonCanceled  ImageBuildConditionReason = "Canceled"
	ImageBuildConditionReasonCanceling ImageBuildConditionReason = "Canceling"
	ImageBuildConditionReasonCompleted ImageBuildConditionReason = "Completed"
	ImageBuildConditionReasonFailed    ImageBuildConditionReason = "Failed"
	ImageBuildConditionReasonPending   ImageBuildConditionReason = "Pending"
	ImageBuildConditionReasonPushing   ImageBuildConditionReason = "Pushing"
)

// Defines values for ImageBuildConditionType.
const (
	ImageBuildConditionTypeReady ImageBuildConditionType = "Ready"
)

// Defines values for ImageBuildRefSourceType.
const (
	ImageBuildRefSourceTypeImageBuild ImageBuildRefSourceType = "imageBuild"
)

// Defines values for ImageExportConditionReason.
const (
	ImageExportConditionReasonCanceled   ImageExportConditionReason = "Canceled"
	ImageExportConditionReasonCanceling  ImageExportConditionReason = "Canceling"
	ImageExportConditionReasonCompleted  ImageExportConditionReason = "Completed"
	ImageExportConditionReasonConverting ImageExportConditionReason = "Converting"
	ImageExportConditionReasonFailed     ImageExportConditionReason = "Failed"
	ImageExportConditionReasonPending    ImageExportConditionReason = "Pending"
	ImageExportConditionReasonPushing    ImageExportConditionReason = "Pushing"
)

// Defines values for ImageExportConditionType.
const (
	ImageExportConditionTypeReady ImageExportConditionType = "Ready"
)

// Defines values for ImageExportFormatPhase.
const (
	ImageExportFormatPhaseComplete   ImageExportFormatPhase = "complete"
	ImageExportFormatPhaseConverting ImageExportFormatPhase = "converting"
	ImageExportFormatPhaseFailed     ImageExportFormatPhase = "failed"
	ImageExportFormatPhasePushing    ImageExportFormatPhase = "pushing"
	ImageExportFormatPhaseQueued     ImageExportFormatPhase = "queued"
)

// Defines values for ImageExportSourceType.
const (
	ImageExportSourceTypeImageBuild ImageExportSourceType = "imageBuild"
)

// Defines values for LateBindingType.
const (
	Late LateBindingType = "late"
)

// Defines values for ResourceKind.
const (
	ResourceKindImageBuild  ResourceKind = "ImageBuild"
	ResourceKindImageExport ResourceKind = "ImageExport"
)

// BindingType The type of binding for the image build.
type BindingType string

// EarlyBinding Early binding configuration - embeds certificate in the image.
type EarlyBinding struct {
	// Type The type of binding.
	Type EarlyBindingType `json:"type"`
}

// EarlyBindingType The type of binding.
type EarlyBindingType string

// ExportFormatType The type of format to export the image to.
type ExportFormatType string

// ImageBuild ImageBuild represents a build request for a container image.
type ImageBuild struct {
	// ApiVersion APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources.
	ApiVersion string `json:"apiVersion"`

	// Imageexports Array of ImageExport resources that reference this ImageBuild. Only populated when withExports query parameter is true.
	Imageexports *[]ImageExport `json:"imageexports,omitempty"`

	// Kind Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds.
	Kind string `json:"kind"`

	// Metadata ObjectMeta is metadata that all persisted resources must have, which includes all objects users must create.
	Metadata externalRef0.ObjectMeta `json:"metadata"`

	// Spec ImageBuildSpec describes the specification for an image build.
	Spec ImageBuildSpec `json:"spec"`

	// Status ImageBuildStatus represents the current status of an ImageBuild.
	Status *ImageBuildStatus `json:"status,omitempty"`
}

// ImageBuildBinding ImageBuildBinding specifies binding configuration for the build.
type ImageBuildBinding struct {
	union json.RawMessage
}

// ImageBuildCondition defines model for ImageBuildCondition.
type ImageBuildCondition struct {
	// LastTransitionTime The last time the condition transitioned from one status to another.
	LastTransitionTime time.Time `json:"lastTransitionTime"`

	// Message Human readable message indicating details about last transition.
	Message string `json:"message"`

	// ObservedGeneration The .metadata.generation that the condition was set based upon.
	ObservedGeneration *int64 `json:"observedGeneration,omitempty"`

	// Reason A (brief) reason for the condition's last transition.
	Reason string `json:"reason"`

	// Status Status of the condition, one of True, False, Unknown.
	Status externalRef0.ConditionStatus `json:"status"`

	// Type Type of ImageBuild condition.
	Type ImageBuildConditionType `json:"type"`
}

// ImageBuildConditionReason Reason for the ImageBuild Ready condition.
type ImageBuildConditionReason string

// ImageBuildConditionType Type of ImageBuild condition.
type ImageBuildConditionType string

// ImageBuildDestination ImageBuildDestination specifies the destination for the built image.
type ImageBuildDestination struct {
	// ImageName The name of the output image.
	ImageName string `json:"imageName"`

	// ImageTag The tag of the output image.
	ImageTag string `json:"imageTag"`

	// Repository The name of the Repository resource of type OCI to push the built image to.
	Repository string `json:"repository"`
}

// ImageBuildList ImageBuildList is a list of ImageBuild resources.
type ImageBuildList struct {
	// ApiVersion APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources.
	ApiVersion string `json:"apiVersion"`

	// Items List of ImageBuild resources.
	Items []ImageBuild `json:"items"`

	// Kind Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds.
	Kind string `json:"kind"`

	// Metadata ListMeta describes metadata that synthetic resources must have, including lists and various status objects. A resource may have only one of {ObjectMeta, ListMeta}.
	Metadata externalRef0.ListMeta `json:"metadata"`
}

// ImageBuildRefSource ImageBuildRefSource specifies a source image from an ImageBuild resource.
type ImageBuildRefSource struct {
	// ImageBuildRef The name of the ImageBuild resource to use as source.
	ImageBuildRef string `json:"imageBuildRef"`

	// Type The type of source.
	Type ImageBuildRefSourceType `json:"type"`
}

// ImageBuildRefSourceType The type of source.
type ImageBuildRefSourceType string

// ImageBuildSource ImageBuildSource specifies the source image for the build.
type ImageBuildSource struct {
	// ImageName The name of the source image.
	ImageName string `json:"imageName"`

	// ImageTag The tag of the source image.
	ImageTag string `json:"imageTag"`

	// Repository The name of the Repository resource of type OCI containing the source image.
	Repository string `json:"repository"`
}

// ImageBuildSpec ImageBuildSpec describes the specification for an image build.
type ImageBuildSpec struct {
	// Binding ImageBuildBinding specifies binding configuration for the build.
	Binding ImageBuildBinding `json:"binding"`

	// Destination ImageBuildDestination specifies the destination for the built image.
	Destination ImageBuildDestination `json:"destination"`

	// Source ImageBuildSource specifies the source image for the build.
	Source ImageBuildSource `json:"source"`

	// UserConfiguration ImageBuildUserConfiguration specifies user configuration for the build.
	UserConfiguration *ImageBuildUserConfiguration `json:"userConfiguration,omitempty"`
}

// ImageBuildStatus ImageBuildStatus represents the current status of an ImageBuild.
type ImageBuildStatus struct {
	// Architecture The architecture of the built image.
	Architecture *string `json:"architecture,omitempty"`

	// Conditions Current conditions of the ImageBuild.
	Conditions *[]ImageBuildCondition `json:"conditions,omitempty"`

	// ImageReference The full image reference of the built image (e.g., quay.io/org/imagename:tag).
	ImageReference *string `json:"imageReference,omitempty"`

	// LastSeen The last time the build was seen (heartbeat).
	LastSeen *time.Time `json:"lastSeen,omitempty"`

	// ManifestDigest The digest of the built image manifest.
	ManifestDigest *string `json:"manifestDigest,omitempty"`
}

// ImageBuildUserConfiguration ImageBuildUserConfiguration specifies user configuration for the build.
type ImageBuildUserConfiguration struct {
	// Publickey The public key for the user configuration.
	Publickey string `json:"publickey"`

	// Username The username for the user configuration.
	Username string `json:"username"`
}

// ImageExport ImageExport represents an export request to convert and push images to different formats.
type ImageExport struct {
	// ApiVersion APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources.
	ApiVersion string `json:"apiVersion"`

	// Kind Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds.
	Kind string `json:"kind"`

	// Metadata ObjectMeta is metadata that all persisted resources must have, which includes all objects users must create.
	Metadata externalRef0.ObjectMeta `json:"metadata"`

	// Spec ImageExportSpec describes the specification for an image export.
	Spec ImageExportSpec `json:"spec"`

	// Status ImageExportStatus represents the current status of an ImageExport.
	Status *ImageExportStatus `json:"status,omitempty"`
}

// ImageExportCondition defines model for ImageExportCondition.
type ImageExportCondition struct {
	// LastTransitionTime The last time the condition transitioned from one status to another.
	LastTransitionTime time.Time `json:"lastTransitionTime"`

	// Message Human readable message indicating details about last transition.
	Message string `json:"message"`

	// ObservedGeneration The .metadata.generation that the condition was set based upon.
	ObservedGeneration *int64 `json:"observedGeneration,omitempty"`

	// Reason A (brief) reason for the condition's last transition.
	Reason string `json:"reason"`

	// Status Status of the condition, one of True, False, Unknown.
	Status externalRef0.ConditionStatus `json:"status"`

	// Type Type of ImageExport condition.
	Type ImageExportConditionType `json:"type"`
}

// ImageExportConditionReason Reason for the ImageExport Ready condition.
type ImageExportConditionReason string

// ImageExportConditionType Type of ImageExport condition.
type ImageExportConditionType string

// ImageExportFormatPhase The phase of a single format conversion.
type ImageExportFormatPhase string

// ImageExportList ImageExportList is a list of ImageExport resources.
type ImageExportList struct {
	// ApiVersion APIVersion defines the versioned schema of this representation of an object. Servers should convert recognized schemas to the latest internal value, and may reject unrecognized values. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources.
	ApiVersion string `json:"apiVersion"`

	// Items List of ImageExport resources.
	Items []ImageExport `json:"items"`

	// Kind Kind is a string value representing the REST resource this object represents. Servers may infer this from the endpoint the client submits requests to. Cannot be updated. In CamelCase. More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds.
	Kind string `json:"kind"`

	// Metadata ListMeta describes metadata that synthetic resources must have, including lists and various status objects. A resource may have only one of {ObjectMeta, ListMeta}.
	Metadata externalRef0.ListMeta `json:"metadata"`
}

// ImageExportSource ImageExportSource specifies the source image for the export.
type ImageExportSource struct {
	union json.RawMessage
}

// ImageExportSourceType The type of source for the image export.
type ImageExportSourceType string

// ImageExportSpec ImageExportSpec describes the specification for an image export.
type ImageExportSpec struct {
	// Format The type of format to export the image to.
	Format ExportFormatType `json:"format"`

	// Source ImageExportSource specifies the source image for the export.
	Source ImageExportSource `json:"source"`
}

// ImageExportStatus ImageExportStatus represents the current status of an ImageExport.
type ImageExportStatus struct {
	// Conditions Current conditions of the ImageExport.
	Conditions *[]ImageExportCondition `json:"conditions,omitempty"`

	// LastSeen The last time the export was seen (heartbeat).
	LastSeen *time.Time `json:"lastSeen,omitempty"`

	// ManifestDigest The digest of the exported image manifest for this format.
	ManifestDigest *string `json:"manifestDigest,omitempty"`
}

// LateBinding Late binding configuration - device binds at first boot.
type LateBinding struct {
	// Type The type of binding.
	Type LateBindingType `json:"type"`
}

// LateBindingType The type of binding.
type LateBindingType string

// ResourceKind Resource types exposed via the ImageBuilder API.
type ResourceKind string

// ListImageBuildsParams defines parameters for ListImageBuilds.
type ListImageBuildsParams struct {
	// LabelSelector A selector to restrict the list of returned objects by their labels.
	LabelSelector *string `form:"labelSelector,omitempty" json:"labelSelector,omitempty"`

	// FieldSelector A selector to restrict the list of returned objects by their fields.
	FieldSelector *string `form:"fieldSelector,omitempty" json:"fieldSelector,omitempty"`

	// Limit The maximum number of results returned in the list response.
	Limit *int32 `form:"limit,omitempty" json:"limit,omitempty"`

	// Continue An optional parameter to query more results from the server.
	Continue *string `form:"continue,omitempty" json:"continue,omitempty"`

	// WithExports If true, includes related ImageExport resources in each ImageBuild in the response.
	WithExports *bool `form:"withExports,omitempty" json:"withExports,omitempty"`
}

// GetImageBuildParams defines parameters for GetImageBuild.
type GetImageBuildParams struct {
	// WithExports If true, includes related ImageExport resources in the response.
	WithExports *bool `form:"withExports,omitempty" json:"withExports,omitempty"`
}

// GetImageBuildLogParams defines parameters for GetImageBuildLog.
type GetImageBuildLogParams struct {
	// Follow If true, stream logs continuously (like kubectl logs -f). For active builds, keeps connection open. For completed builds, returns all logs and closes.
	Follow *bool `form:"follow,omitempty" json:"follow,omitempty"`
}

// ListImageExportsParams defines parameters for ListImageExports.
type ListImageExportsParams struct {
	// LabelSelector A selector to restrict the list of returned objects by their labels.
	LabelSelector *string `form:"labelSelector,omitempty" json:"labelSelector,omitempty"`

	// FieldSelector A selector to restrict the list of returned objects by their fields.
	FieldSelector *string `form:"fieldSelector,omitempty" json:"fieldSelector,omitempty"`

	// Limit The maximum number of results returned in the list response.
	Limit *int32 `form:"limit,omitempty" json:"limit,omitempty"`

	// Continue An optional parameter to query more results from the server.
	Continue *string `form:"continue,omitempty" json:"continue,omitempty"`
}

// GetImageExportLogParams defines parameters for GetImageExportLog.
type GetImageExportLogParams struct {
	// Follow If true, stream logs continuously (like kubectl logs -f). For active exports, keeps connection open. For completed exports, returns all logs and closes.
	Follow *bool `form:"follow,omitempty" json:"follow,omitempty"`
}

// CreateImageBuildJSONRequestBody defines body for CreateImageBuild for application/json ContentType.
type CreateImageBuildJSONRequestBody = ImageBuild

// CreateImageExportJSONRequestBody defines body for CreateImageExport for application/json ContentType.
type CreateImageExportJSONRequestBody = ImageExport

// AsEarlyBinding returns the union data inside the ImageBuildBinding as a EarlyBinding
func (t ImageBuildBinding) AsEarlyBinding() (EarlyBinding, error) {
	var body EarlyBinding
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromEarlyBinding overwrites any union data inside the ImageBuildBinding as the provided EarlyBinding
func (t *ImageBuildBinding) FromEarlyBinding(v EarlyBinding) error {
	v.Type = "early"
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeEarlyBinding performs a merge with any union data inside the ImageBuildBinding, using the provided EarlyBinding
func (t *ImageBuildBinding) MergeEarlyBinding(v EarlyBinding) error {
	v.Type = "early"
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

// AsLateBinding returns the union data inside the ImageBuildBinding as a LateBinding
func (t ImageBuildBinding) AsLateBinding() (LateBinding, error) {
	var body LateBinding
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromLateBinding overwrites any union data inside the ImageBuildBinding as the provided LateBinding
func (t *ImageBuildBinding) FromLateBinding(v LateBinding) error {
	v.Type = "late"
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeLateBinding performs a merge with any union data inside the ImageBuildBinding, using the provided LateBinding
func (t *ImageBuildBinding) MergeLateBinding(v LateBinding) error {
	v.Type = "late"
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t ImageBuildBinding) Discriminator() (string, error) {
	var discriminator struct {
		Discriminator string `json:"type"`
	}
	err := json.Unmarshal(t.union, &discriminator)
	return discriminator.Discriminator, err
}

func (t ImageBuildBinding) ValueByDiscriminator() (interface{}, error) {
	discriminator, err := t.Discriminator()
	if err != nil {
		return nil, err
	}
	switch discriminator {
	case "early":
		return t.AsEarlyBinding()
	case "late":
		return t.AsLateBinding()
	default:
		return nil, errors.New("unknown discriminator value: " + discriminator)
	}
}

func (t ImageBuildBinding) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *ImageBuildBinding) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}

// AsImageBuildRefSource returns the union data inside the ImageExportSource as a ImageBuildRefSource
func (t ImageExportSource) AsImageBuildRefSource() (ImageBuildRefSource, error) {
	var body ImageBuildRefSource
	err := json.Unmarshal(t.union, &body)
	return body, err
}

// FromImageBuildRefSource overwrites any union data inside the ImageExportSource as the provided ImageBuildRefSource
func (t *ImageExportSource) FromImageBuildRefSource(v ImageBuildRefSource) error {
	v.Type = "imageBuild"
	b, err := json.Marshal(v)
	t.union = b
	return err
}

// MergeImageBuildRefSource performs a merge with any union data inside the ImageExportSource, using the provided ImageBuildRefSource
func (t *ImageExportSource) MergeImageBuildRefSource(v ImageBuildRefSource) error {
	v.Type = "imageBuild"
	b, err := json.Marshal(v)
	if err != nil {
		return err
	}

	merged, err := runtime.JSONMerge(t.union, b)
	t.union = merged
	return err
}

func (t ImageExportSource) Discriminator() (string, error) {
	var discriminator struct {
		Discriminator string `json:"type"`
	}
	err := json.Unmarshal(t.union, &discriminator)
	return discriminator.Discriminator, err
}

func (t ImageExportSource) ValueByDiscriminator() (interface{}, error) {
	discriminator, err := t.Discriminator()
	if err != nil {
		return nil, err
	}
	switch discriminator {
	case "imageBuild":
		return t.AsImageBuildRefSource()
	default:
		return nil, errors.New("unknown discriminator value: " + discriminator)
	}
}

func (t ImageExportSource) MarshalJSON() ([]byte, error) {
	b, err := t.union.MarshalJSON()
	return b, err
}

func (t *ImageExportSource) UnmarshalJSON(b []byte) error {
	err := t.union.UnmarshalJSON(b)
	return err
}
