// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
