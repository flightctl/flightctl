// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"/H8AAAD//2uN1dkreAAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
