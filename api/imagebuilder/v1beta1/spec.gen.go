// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
