// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
