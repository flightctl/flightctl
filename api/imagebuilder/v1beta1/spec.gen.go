// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"bQAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
