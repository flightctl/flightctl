// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
