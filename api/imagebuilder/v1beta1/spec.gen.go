// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"H4sIAAAAAAAC/+xc4XPbNrL/VzC8N9P0RpaStPfmPX96jpP0/NI0Ptu5+3DJdCByJeFCAgwA2lE7+t9v",
	"dgGSIAVKtGM3uVafbAkgsNhd7P72B1C/JqkqSiVBWpMc/5qYdAUFp3+fCZkJubxal4AfMzCpFqUVSibH",
	"ydUKmF2XwNSCzV1HtlCa2RUwUfAlsHkl8myaTBKQVZEc/zMBrvN1MklybiF5P0ksDZwYq4VcJpPk0xH2",
	"PLrmWvICDD4SiPDCPx189SMNtJkk1OYbtkWl1kbIVMmFWFaaYys7YlDMITMsBW3FQqTcAhOyXQYuoNSq",
	"xGYgtdix+the+9aiN5tJouFjJTRk2I1a215q/i9IbYIr/FQqbV8qXXC73yAL6sesYkDPBVaxKhTrusg+",
	"JJPkY6puniaTRBg10jB9ef7++vmrZFvMv52++cfTyPdnl2/IcGco0zN0lO0FtW1MQ6nBoIsy7vyKodbA",
	"WPI5jka1XEjQQ0bjpfg7aEMj9yc6OT/zbSyDhZBgSF/X7jvImNsTqFi7EqaVxrmQWjAumTPVlF2CxgeZ",
	"Wakqz1Cwa9CWaUjVUopfmtEMWgenwd1gLBPSgpY8Z9c8r2DCuMxYwddMA47LKhmMQF3MlL1WGp11oY7Z",
	"ytrSHM9mS2GnH/7HTIWapaooKinseoba0WJeWaXNLINryGdGLI+4TlfCQmorDTNeiiMSVuKizLTI/qTB",
	"qEqnYFCdPb+dJKRo514molOt+RpVQ1Z05mfNgMyuOH5cgAaZglNra+8peyPzNStVWaF2MnazAsluhF25",
	"gQz7WIFes5JrXoBFqxtmdUV2FxYKEui/NCyS4+RPszbAzbzuZ4FUuBa/OI5C4+cPQkYc8pWQGc7EmdOC",
	"s0PrDvgVWvTixeVVs1a3NucdgR+3joJGFnIB2vVcaFXQKCCzUgnp9m6aC5CWmWpeCGtq50cfmrJTLqWy",
	"bA6sKjNU15SdSXbKC8hPuYEHdxNUnjlClcUdpQDLM275PpukSsPP10/mYPmTn1UJkpfi5zekuNdgOQ5l",
	"SkhHmZbc6BJ741OW28rc4jnXvx+bgxDiPSRYm5ctFrrbgQcz1FYXhqOJhQAzkLfqVNsk2UzggIWQ3CqN",
	"MxS8LP1kLvkMrLuTO31yHuiK+bbuuWki7PonXuAjtPDNJFES3iyS43/uVndn2s1kd+fOxN28capkJqyP",
	"6zzPR0wddbRmnGfcAAkUz/rjXKgZjXL1yCz/ftJzi2YUMncnHzaROa6MC+Amlurc9433BENeAM/W6GRu",
	"gBAknEPtHNTV/XtemZX771QVZQ4WcD+85CKHbCSGGJS7nXCwSyDJ8DCNiINdQtkHO9WLiqt6AI15JBZo",
	"OKpbUvvd9YXT+CE60j0HYzEURPFOtFsQcdAzsqAljDV2CGDR1y4SxJApLsIBKGCqsmUVDLSVMTSUygir",
	"9Hr/YBdN3zblYhPq/83pGaKssjKr/gI8Dt6a2vLlALTmy5Hy9zZ7sJhJoCU31e588aMwdpf5sN0Bkhz/",
	"67pbB70dwPADg+EadHaV+eMes4zHqq5GOkDVrxiqorEdUL0dcHROsDsSXMDikmy0Kxw0nYJYzpm3rYt6",
	"ZDIuYw45ENLrkfdH4siYuK0rA4wb1k6yHXP38hntw3XebGUbSapMesvZre/9yt7SNKqgq+s+RL9zwgyH",
	"Ha7Fr0akrr0j3Wfq9aRMHWv2zD02bTZr3WNBXyoO2q+ElLnGeW09Z8u0RT1c9rnMrg3nbUE3LoIH1VPW",
	"hWjjng9xHVa2jZuOrGxd/76u/TBdmSbN6vYouqmuB1VNPUISj/JEpTUlCtfqgEPAAW2jliC4x50z7FE7",
	"aQ+0bjl8g8ojSzj1IrZ9tmPdHdJ4W7JG8jlJelEzY/F1Lqo8947Zcmjb62WPYLqcTtjHiq8xfSq9nFED",
	"buJjy5ffRjWSc2MvAWR8bmxlVhTQxjZ2g/EdQLJHK+DazoFbGtrR0Mlxgrn+CB+KJl0uxQKMfS6WEMO7",
	"OGtGbbE11k/HI0rcbz3xF3fZhqtsKWdZ0+g16WxVg2URmlKBQeIQkM3EgoxiPQ9/QOC/AQI/4OD/cMrW",
	"7bs7cLb+wQcgbd3IXx3D2BPrvinG/mHNdEgftyEZ/aCjWMZTF6Tul2eMyt4jGqN9OtLsGKpLNg4M1WMb",
	"o736dGPM3Lv5Rq/s+yEcI9P3GEfXYz/luNVvBOfoEi9kPr1+VhkVjv9wFVBIOPakvzXpOOfGlW+1OraW",
	"YB6KgAxP7M9XGLGiEpbYRJiDGSGXOdR3DxzSMD3v+1hBRe6fhruqbPZO6ncIgsc7bvFA5L/Vs8Wbh3Z2",
	"0CW6qztDNPLGO8Q38w5it+0QYXa3Q/MBWH4N1G7MLod7CAdydy+567HrLrYx7DKGbnQ5Z9+VgIA/3ctX",
	"tOTzNj2x49mmV806feaNgZhA+y4OxAV5H1P/1UgWunfLsVV3hJre0tets1kr21k47HCPYK7eKocJ0bbD",
	"eEa0XXc3Ad2W1twGj5uWONpzhaR/J/J2jGhn7zkUdlktFuLTtpbe0D88Z4Y6YErjZQkyq5ObPxJuoRpG",
	"UBJsPz4bYF+9DvaFjl3sa9hlPP36YsCyn8GUtkPeNivu5Epvw1R6Bu+3piq7FUDDVo7zkrjh++Esbvte",
	"r31HgqytEv4oR1W3O576jGPKHeF/4Kjybodf4S25bbzKLQzegc/gWqSu2TBu2UJoY9lcKXtP19/jV/5H",
	"336/8DZ7FcXDFw3ERQRIW85g9SB476wGNDs5PwvlGkqqEVmxON3L6m3Jht+2UREBe+WOpxYqz9UNGuNV",
	"NQctwYJB6ViIatlbA3TvmRHvSHkny3AH+8TsdI6r2TYUxr8rzaVxvI0Y2r7dONnKaptnIXNRQkmo8wVK",
	"IpVdgb5F9ARj+DIixV+rgkumgWd8ngPz/Ri6EUIPuWQZWC5yw/hcVdZL3IgX3a1qbrCwyX4ACXqAlcLV",
	"T2uwPl02Pd319K42XOKwRMlkrCrdtM3ChbT//X0rB1a5S9AuTMVZ0hP2aK4FLL5lusuXNnN+Y0atdBxV",
	"vtt5B9hzP/Qk5kvNylrDxrbuqHm3lHPZoJKORibkgmrBrnQFE/aS5wYm7K38INVNh2fCdqKJc4N/fY+R",
	"8LsnnR+r9209dO/rZqahpTeFZJRRwJYAg9e+6RzSrKVdgRVp8CJFURnLVvwaJkzINK8ovOfC0LFlxq65",
	"FqoyDcojs5gpO2nTINb9OABTMl/X+v21PcSZsFqwTRQTWiGryJ5+zddsDrRlhLNiZUDTZ85yUQjLlHvN",
	"SlbFHDTOSuCQabCVlpA5bsgHgfqdEcrUxFiwFTesUBoYaYhfc5Fj+Jgy3NaOEhGGqZJ/rKChmeYkB+F2",
	"YQw1UBQLj3Z7rAdqnkKJA2xEyFmFYmoB1y5qSvhkaW2Io2tJWnWfOjWhbehdJSOMRbhMY6FYnjgplTEC",
	"n/Qq8yvtpmtcd7ricgkZU9qpwK64ZJwt4IYVQlaoLrJpyY2BzKmktnjNAS4E0FUtp233jk1lHBwShtWm",
	"9aq8EXmOIooMk1PK81pTXtPOlg44aDClkrg1K5mDMWytKiePhhREo0qrPoBs7qSB1rgcF0sGEF/hANuZ",
	"heJUVXIAgrceZaq5QcNK653Ly0mKv1mJdMW4BlK/2z6I1GVg6HopU3a2aJ+snaV+7SxjOZ9DjuZwWjWQ",
	"Q2qVNhN8qO/nzTpqoQyrXNwgP3WKxGFqpeewsKyStHlkxlQhLNYUWUX0nwEteC5+IffoCkp2dBQ1ewSC",
	"PH0OKa8MMEHNuPR0VckPOJJqW0kFwnjq1vhO37br0eBV5zywvya3ECxw7r6SmppUBN3Ix6+fTJ/8hWWK",
	"5MZR2jmcl2PmlWjGyjTof9tvcGV/xnK7IHzxZ7fbxC/+KCNVOdqPhDglyrMhunFeDRQph8a2qo58mNHp",
	"A3ziqR0FGDZjc2hwzL7NVzRtuNBuFuF5zkoMAQYVH80kbmP4DWHoCR/KKIj7vqkGbmOvWkqp3JGB+5i5",
	"/Mjz80gdEezu7hLazg52rZuAKDrXSAMtoTwenRjLi3KgSqmRrufCEdi5pWTjoWwGOdxlLr8L6PHbzLfc",
	"gWJPmAtxaRNiOicBQbEQINz2SBSxHuEDmLLz5o3LWt9rY6GY0rn9EQKEkaCXwuHnmP81Lyl+uwOOD7Cu",
	"8Uxe1VAg5TJM50ovucQdjP0QMSyVxo+PTKpK962Lyt82eTnmRXLcKyzuFCxaeNxI0DErBScx3DJ1I019",
	"zOa+RwTH3tEZwgznepcMk0OYCzvZPDKhrLGPVyJN69J3e4JAEfYbExzLeXTQOe0bx05Fw9QehE/HWA6D",
	"eCSBZVDK89xbOVPyG1v3cFAtMN/h8PNhDz9TlUV2w2W1XAKlj79eXZ3XxsG+La/pKo4Je4xY1ifrfvD4",
	"7mk0eBxOPe/11HOAdDlhq6rg8qihXYLmhoMNynCqpXz6GIhIQ0RHwdOVkDA41c1q3ZsADe2h+ju67FVp",
	"jIdOHg9xhWmrPChKu/aolEAtaRw9DQcLasMT5m+npTnXng+Xzo39YsmN5xVGHnDwWF2D1iJDxLyHgNlF",
	"YrTKY2+oyD5m75LLKk3BmHcJQsVgpQ/uNogJjrjMjrxK955Sxc65G3qIwsQoQgjVBWmlhV1fYoj071EA",
	"16BPKrsapLG6D8XprGCYoXTUncl9elmHpP//xxWuiqZIjn1rqxm0w+DASi/PsjhwePv27HnjBQ6lBDSj",
	"BwJtfT5l7DUvPcXaeaCF8lMECHSehpPQr2EkNXZJlF7+LLJWbl6KV0AHZo2Qd1axG2GDdkTnrDkgnlIp",
	"jrVQnhwnFnjxf4tcLFc2tflUqFY4VMhLaiFWRKucXQEvkklS6dwrGZ298/QWPCSqntWkvq8KKPl0x56+",
	"k1eUjXyPgku6iBe81ROUQPj83L9Y3lzs9+cl4c/LmOk79PJcpCAd6e8Xd1LydAXs6fTx1npubm6mnJqn",
	"Si9n/lkz+/Hs9MVPly+Onk4fT1e2yOmkSdgch+vpqbvok/OzZJJc13gn8ZYiMztjJcfJd9PH0yeIk7hd",
	"0U7DWDC7fuLeA6G10tdLsANXnIZeXW3CGToUdW17GprR/zaLoYsd2yWLI0gck4YxJ7UtbUEcieel6srT",
	"VSRCO6rFDDk/tV760evdzCMVx2Zyr1IRBTEoFbXeTSrcMAX/JIqq6FBIpsptS5Z2iK2GtBrSkSiE7Uix",
	"F5VFtIX1hb8W0f4Qj1X+t3k8KeSkbGCVqzeG5GrY5FspCMEAHQc0hIUGV8TGf3tISAY8XYWeLWouZ7fe",
	"gl8g6oiYwYJXuU2OF3QgUYs8VyoHLpPN5j3VazQ2bbenjx/XkRMcicnLMvf3bGb/8jCqnWDctSi6VUqh",
	"uccGvcKg8P09zrmr0osI8Ixn7MKBZifJky8lyVvJK7siYiBzonz3pUR5qfRcZBnQzZbvn/7vl5LjSin2",
	"mst1bSGD8vzly+nl0qfqt7KB7Y5u4EvTXKmYuze/N5OkVLGLOKdE6O14072bvlz3zmUAX+Q9U9n6Abaq",
	"W3iLrzGAbbaCxJMHmzmmrewQJb72KPH4i0WJUyUXuXA83yFY3S1YbSYx+D37FdHFxsUwepdkK5o9p+9H",
	"RzPXvRPNdqLxET/k0SAiLCRaQCS5vwgSxrFd4O23AUK7QNAhqGwFle+/lBw/Kcteqkpmh6jyORAoWrz/",
	"QCfs4wLGD2C/ymhxH6Xe76CuO4SzQzj7w4Kk4Bem95CUsZcwB1jKdrMfaMoDTfkgNOWDp4bgTfID53fg",
	"/H7/GQL8mzljSb9ePtjJ+vm3fh6Q9qtf8v8CvF849YH4OxB/B+Lvt45YA6D29tTf3pgWcH9NTLt9OR+Z",
	"5j+C/RuOdId6+VAv/17R0F7+b2/UqAnAQ8g4hIxDyPj9wxG6hUsX4Gl7u5uKM/p5UP/E9i/g+HhhmJKD",
	"lwL9Lg8IvW1CJjJSjLkLh/KCb95v/h0AAP//ft2Oqa5yAAA=",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
