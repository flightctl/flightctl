// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"zf8HAAD//085JWVNeQAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
