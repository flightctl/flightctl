// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"KXaVIRzKC77+sP6/AAAA//+MaBp9kIIAAA==",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
