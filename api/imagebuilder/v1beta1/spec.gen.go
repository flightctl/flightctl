// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.5.1 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/core/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(path.Dir(pathToFile), "../../core/v1beta1/openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
