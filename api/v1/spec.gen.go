// Package v1 provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package v1

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
