// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"LZmahgAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "../openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
