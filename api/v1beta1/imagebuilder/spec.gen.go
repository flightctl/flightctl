// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
	"psf94RpN3by7+f8AAAD//3pPUKjfcgAA",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "../openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
