// Package imagebuilder provides primitives to interact with the openapi HTTP API.
//
// Code generated by github.com/oapi-codegen/oapi-codegen/v2 version v2.3.0 DO NOT EDIT.
package imagebuilder

import (
	"bytes"
	"compress/gzip"
	"encoding/base64"
	"fmt"
	"net/url"
	"path"
	"strings"

	externalRef0 "github.com/flightctl/flightctl/api/v1beta1"
	"github.com/getkin/kin-openapi/openapi3"
)

// Base64 encoded, gzipped, json marshaled Swagger object
var swaggerSpec = []string{

	"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",
}

// GetSwagger returns the content of the embedded swagger specification file
// or error if failed to decode
func decodeSpec() ([]byte, error) {
	zipped, err := base64.StdEncoding.DecodeString(strings.Join(swaggerSpec, ""))
	if err != nil {
		return nil, fmt.Errorf("error base64 decoding spec: %w", err)
	}
	zr, err := gzip.NewReader(bytes.NewReader(zipped))
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}
	var buf bytes.Buffer
	_, err = buf.ReadFrom(zr)
	if err != nil {
		return nil, fmt.Errorf("error decompressing spec: %w", err)
	}

	return buf.Bytes(), nil
}

var rawSpec = decodeSpecCached()

// a naive cached of a decoded swagger spec
func decodeSpecCached() func() ([]byte, error) {
	data, err := decodeSpec()
	return func() ([]byte, error) {
		return data, err
	}
}

// Constructs a synthetic filesystem for resolving external references when loading openapi specifications.
func PathToRawSpec(pathToFile string) map[string]func() ([]byte, error) {
	res := make(map[string]func() ([]byte, error))
	if len(pathToFile) > 0 {
		res[pathToFile] = rawSpec
	}

	pathPrefix := path.Dir(pathToFile)

	for rawPath, rawFunc := range externalRef0.PathToRawSpec(path.Join(pathPrefix, "../openapi.yaml")) {
		if _, ok := res[rawPath]; ok {
			// it is not possible to compare functions in golang, so always overwrite the old value
		}
		res[rawPath] = rawFunc
	}
	return res
}

// GetSwagger returns the Swagger specification corresponding to the generated code
// in this file. The external references of Swagger specification are resolved.
// The logic of resolving external references is tightly connected to "import-mapping" feature.
// Externally referenced files must be embedded in the corresponding golang packages.
// Urls can be supported but this task was out of the scope.
func GetSwagger() (swagger *openapi3.T, err error) {
	resolvePath := PathToRawSpec("")

	loader := openapi3.NewLoader()
	loader.IsExternalRefsAllowed = true
	loader.ReadFromURIFunc = func(loader *openapi3.Loader, url *url.URL) ([]byte, error) {
		pathToFile := url.String()
		pathToFile = path.Clean(pathToFile)
		getSpec, ok := resolvePath[pathToFile]
		if !ok {
			err1 := fmt.Errorf("path not found: %s", pathToFile)
			return nil, err1
		}
		return getSpec()
	}
	var specData []byte
	specData, err = rawSpec()
	if err != nil {
		return
	}
	swagger, err = loader.LoadFromData(specData)
	if err != nil {
		return
	}
	return
}
